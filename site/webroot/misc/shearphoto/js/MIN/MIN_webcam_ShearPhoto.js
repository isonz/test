window.webcam={version:"shearphoto2.2",ie:!!navigator.userAgent.match(/MSIE/),protocol:location.protocol.match(/https/i)?"https":"http",callback:null,swf_url:"images/webcam.swf",shutter_url:"images/shutter.mp3",api_url:"",loaded:!1,quality:90,shutter_sound:!0,stealth:!0,hooks:{onLoad:null,onAllow:null,onComplete:null,onError:null},set_hook:function(d,c){return"undefined"==typeof this.hooks[d]?alert("Hook type not supported: "+d):(this.hooks[d]=c,void 0)},fire_hook:function(d,c){return this.hooks[d]?("function"==typeof this.hooks[d]?this.hooks[d](c):"array"==typeof this.hooks[d]?this.hooks[d][0][this.hooks[d][1]](c):window[this.hooks[d]]&&window[this.hooks[d]](c),!0):!1},set_api_url:function(b){this.api_url=b},set_swf_url:function(b){this.swf_url=b},configure:function(){this.get_movie()._configure("camera")},get_html:function(){var f="",e=this.init_config.server_width,h=this.init_config.server_height,g="shutter_enabled="+(this.shutter_sound?1:0)+"&shutter_url="+escape(this.shutter_url)+"&width="+this.init_config.width+"&height="+this.init_config.height+"&server_width="+e+"&server_height="+h+"&uploadfield="+this.init_config.uploadfield;return f+=this.ie?'<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="'+this.protocol+'://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="'+e+'" height="'+h+'" id="webcam_movie" align="middle"><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><param name="movie" value="'+this.swf_url+"?bugid="+Math.random()+'" /><param name="loop" value="false" /><param name="menu" value="false" /><param name="quality" value="best" /><param name="bgcolor" value="#ffffff" /><param name="flashvars" value="'+g+'"/><param name="wmode" value="opaque"/></object>':'<embed id="webcam_movie" src="'+this.swf_url+'" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="'+e+'" height="'+h+'" name="webcam_movie" align="middle" allowScriptAccess="always" wmode="opaque" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="'+g+'" />',this.loaded=!1,f},get_movie:function(){if(!this.loaded){return this.noCamcall()}var b=document.getElementById("webcam_movie");return b||alert("ERROR: Cannot locate movie 'webcam_movie' in DOM"),b},set_stealth:function(b){this.stealth=b},Homing:function(b){clearInterval(this.timer),this.timer=null,b.style.display="none"},timingfun:function(i,h,n,m){var l,k,j;return this.CamTrue?(n.innerHTML="\u53d6\u6d88",l=3,k=this,j=arguments,n.onclick=function(){k.Homing(i),n.innerHTML="\u62cd\u7167",n.onclick=function(){k.timingfun.apply(k,j)}},i.style.display="block",i.innerHTML=l,this.timer=setInterval(function(){return l--,0===l?(k.Homing(i),m.call(k),n.innerHTML="\u5904\u7406\u4e2d...",n.onclick=null,void 0):(i.innerHTML=l,void 0)},800),void 0):(alert("\u8bf7\u95ee\uff1a\u4f60\u6562\u5141\u8bb8\u6444\u50cf\u5934\u542f\u52a8\u5417"),!1)},newsnap:function(f,e,h){this.CamTrue=!1;var g=this;h.innerHTML="\u62cd\u7167",h.onclick=function(){g.timingfun(f,e,h,g.snap)}},snap:function(f,e,h){e&&this.set_hook("onComplete",e),f&&this.set_api_url(f),"undefined"!=typeof h&&this.set_stealth(h);var g=this.get_movie();this.init_config.postargs&&g.SetPostParams(this.init_config.postargs),g._snap(this.api_url,this.quality,this.shutter_sound?1:0,this.stealth?1:0)},freeze:function(){this.get_movie()._snap("",this.quality,this.shutter_sound?1:0,0)},upload:function(d,c){c&&this.set_hook("onComplete",c),d&&this.set_api_url(d),this.get_movie()._upload(this.api_url)},reset:function(){this.get_movie()._reset()},configure:function(b){b||(b="camera"),this.get_movie()._configure(b)},set_quality:function(b){this.quality=b},set_shutter_sound:function(d,c){this.shutter_sound=d,this.shutter_url=c?c:"images/shutter.mp3"},flash_notify:function(d,c){switch(d){case"security":if("Camera.Muted"===c){return this.noCamcall("\u4f60\u5df2\u62d2\u7edd\u4e86\u6444\u50cf\u5934\u542f\u52a8\uff01"),void 0}this.CamTrue="Camera.Unmuted"===c,this.fire_hook("onAllow",this.CamTrue);break;case"flashLoadComplete":this.loaded=!0,this.fire_hook("onLoad");break;case"error":this.fire_hook("onError",c)||this.noCamcall("\u6ca1\u68c0\u6d4b\u5230\u6444\u50cf\u5934\u542f\u52a8\uff0c\u62cd\u7167\u5931\u8d25,\u68c0\u67e5\u662f\u5426\u5176\u4ed6\u7a0b\u5e8f\u5360\u7528\u4e86\u6444\u8c61\u5934");break;case"success":this.fire_hook("onComplete",c.toString());break;default:alert("flash_notify: "+d+": "+c)}}};
